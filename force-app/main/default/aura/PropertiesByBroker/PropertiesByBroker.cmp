<aura:component controller="PropertiesByBroker" implements="flexipage:availableForRecordHome,force:hasRecordId" access="global" >
        <aura:attribute name="recordId" type="Id" />
        <aura:attribute name="brokerRecord" type="Broker__c" />
        <aura:attribute name="propertyRecords" type="Object[]"  />
        <aura:handler name="init" value="{!this}" action="{!c.doInit}" />
        
        <force:recordData aura:id="brokerLookup" 
                          recordId="{!v.recordId}"
                          targetFields="{!v.brokerRecord}" 
                          fields="Picture__c" 
                          layoutType="FULL"  />

        <lightning:card iconName="custom:custom85" title="{! 'Properties for ' + v.brokerRecord.Name }">
            <!-- Demo Step 1 -->
        <!-- <aura:iteration items="{!v.propertyRecords}" var="item" indexVar="i">
                <ul>
                    <li>{!item.Name}</li>
                </ul>
            </aura:iteration> -->

        <lightning:accordion >
            <aura:iteration items="{!v.propertyRecords}" var="item" indexVar="i">
                 <lightning:accordionSection name="{!i}" label="{!item.Name}" title="{!item.Name}">
                    <lightning:recordViewForm recordId="{!item.Id}" objectApiName="Property__c">
                        <lightning:layout multipleRows="true">
                            <lightning:layoutItem size="6">
                                <lightning:outputField fieldName="Beds__c" />
                            </lightning:layoutItem>
                            <lightning:layoutItem size="6">
                                <lightning:outputField fieldName="Baths__c" />
                            </lightning:layoutItem>
                            <lightning:layoutItem size="6">
                                <lightning:outputField fieldName="Price__c" />
                            </lightning:layoutItem>
                            <lightning:layoutItem size="6">
                                <lightning:outputField fieldName="Status__c" />
                            </lightning:layoutItem>
                        </lightning:layout>
                    </lightning:recordViewForm>
                </lightning:accordionSection> 
            </aura:iteration>
        </lightning:accordion>
        <!-- <c:PropertiesByBrokerDetail recordId="{!item.Id}" tab="{!i}" /> -->
    </lightning:card>
</aura:component>
